#include <DualVNH5019MotorShield.h>
#include <PID_v1.h> 
///////////////////////////////////////////////////////////////////////////////////////////////////
DualVNH5019MotorShield motorShield;

const int MAX_SPEED_ANALOG = 255;
const int MAX_SPEED = 400;
int const SPEED = MAX_SPEED;
int const DELAY = SPEED/80;

void stopIfFault();

///////////////////////////////////////////////////////////////////////////////////////////////////
void setup()
{
    Serial.begin(9600); // data rate in bits per second 
    Serial.println("Dual VNH5019 Motor Shield");
    motorShield.init();
}

///////////////////////////////////////////////////////////////////////////////////////////////////
void loop()
{
    motorShield.setSpeeds(SPEED, SPEED); stopIfFault();  
    delay(1000);
}

///////////////////////////////////////////////////////////////////////////////////////////////////
void stopIfFault()
{ 
    if (motorShield.getM1Fault())
    {
        Serial.println("M1 fault"); while(1);
    } 
    if (motorShield.getM2Fault())
    {
        Serial.println("M2 fault"); while(1);
    }
}
///////////////////////////////////////////////////////////////////////////////////////////////////